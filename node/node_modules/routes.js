module.exports = function(server, app){
	response = require('Response'),
	path = require('path'),
	http = require('http'),
	jade = require('jade');
	

	var weatherPage = jade.compile(process.cwd() + "/../weather.jade");
	

	app.get('/', function(req, res){
	  res.redirect('/weatherPage');
	});

	app.get('/weather.html', function(req, res){
	  res.redirect('/weatherPage');
	});

	app.get('/weather', function(req, res){
	  var home = weatherPage(weatherData = undefined);
	  res.render(home);
	});

	app.get('/:file',  function (req, res) {
	  var file = req.params.file;
	  res.sendfile(path.resolve(process.cwd() + "/../" + file));

	});

	app.get('/js/libs/:lib/:file', function (req, res) {
	  var file = req.params.file,
	  lib = req.params.lib;
	 res.sendfile(path.resolve(process.cwd() + "/../js/libs/" + lib + '/' + file));
	});

	app.get('/js/libs/:lib/media/js/:file', function (req, res) {
	  var file = req.params.file,
	  lib = req.params.lib,
	  sub1 = req.params.sub1,
	  sub2 = req.params.sub2;
	 res.sendfile(path.resolve(process.cwd() + "/../js/libs/" + lib + '/media/js/' + file));
	});

	app.get('/js/libs/:lib/:sub/:file', function (req, res) {
	  var file = req.params.file,
	  lib = req.params.lib,
	  sub = req.params.sub;
	 res.sendfile(path.resolve(process.cwd() + "/../js/libs/" + lib + '/'+sub+'/' + file));
	});

	app.get('/css/:file', function (req, res) {
	  var file = req.params.file,
	    folder = req.params.folder;
	    res.sendfile(path.resolve(process.cwd() + "/../css/" + file));
	});
	app.get('/fonts/:file', function (req, res) {
	  var file = req.params.file,
	    folder = req.params.folder;
	    res.sendfile(path.resolve(process.cwd() + "/../fonts/" + file));
	});

	app.post('/weather', function(req, res){
		response().Weather(req, res);
	});


	return server;
}