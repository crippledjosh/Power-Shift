module.exports = function(server, app){
	response = require('Response'),
	path = require('path'),
	http = require('http'),
	jade = require('jade');
	

	var weatherPage = jade.compile(process.cwd() + "/../weather.jade");
	

	app.get('/', function(req, res){
	  res.redirect('/weatherPage');
	});

	app.get('/weather.html', function(req, res){
	  res.redirect('/weatherPage');
	});

	app.get('/weather', function(req, res){
	  var home = weatherPage(weatherData = undefined);
	  res.render(home);
	});

	app.get('/:file',  function (req, res) { // could limit this to just get requireconfig file as potential security risk if not careful about which files go in main directory. 
	  var file = req.params.file;
	  res.sendfile(path.resolve(process.cwd() + "/../" + file));
	});

	app.get('/js/libs/:lib/:file', function (req, res) {
	  var file = req.params.file,
	  lib = req.params.lib;
	 res.sendfile(path.resolve(process.cwd() + "/../js/libs/" + lib + '/' + file));
	});

	app.get('/css/:file', function (req, res) {
	  var file = req.params.file,
	    folder = req.params.folder;
	    res.sendfile(path.resolve(process.cwd() + "/../css/" + file));
	});

	app.post('/weather', function(req, res){
		response().Weather(req, res);
	});


	return server;
}